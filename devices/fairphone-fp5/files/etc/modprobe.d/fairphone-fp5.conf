# Fairphone 5 module configuration
# Ensure USB-C Alt Mode components load in correct order

# Type-C mux drivers need to load before pmic-glink to establish device links
softdep qcom_pmic_glink pre: fsa4480 ptn36502 phy-qcom-qmp-combo typec_mux_fsa4480 typec_mux_ptn36502

# LPASS audio dependencies - ensure ADSP remoteproc and clocks are ready
# The ADSP q6v5_pas must be up before lpass_audio_cc can probe
# This prevents the "deferred probe timeout" error on lpass_audio_cc-sc7280
softdep lpass_audio_cc_sc7280 pre: qcom_q6v5_pas qcom_common clk_qcom gcc_sc7280

# Audio services need GLINK and ADSP ready
softdep snd_soc_qcom_common pre: qcom_glink_smem qcom_q6v5_pas
softdep q6apm pre: qcom_q6v5_pas qcom_apr

# DisplayPort controller needs the clocks and PHY ready
softdep msm_dp pre: dispcc_sc7280 phy-qcom-qmp-combo

# FastRPC needs ADSP to be fully initialized
softdep qcom_fastrpc pre: qcom_q6v5_pas

# USB needs PHY and typec-mux ready before full initialization
softdep dwc3_qcom pre: phy-qcom-qmp-combo phy-qcom-snps-femto-v2
