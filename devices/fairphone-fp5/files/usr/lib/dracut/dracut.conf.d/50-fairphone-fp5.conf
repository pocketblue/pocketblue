# Fairphone 5 (QCM6490/SC7280) dracut configuration

# Firmware for initramfs - include all device-specific firmware
install_optional_items+=" /usr/lib/firmware/qcom/qcm6490/fairphone5/* "
install_optional_items+=" /usr/lib/firmware/qcom/a660_sqe.fw /usr/lib/firmware/qcom/a660_gmu.bin "
install_optional_items+=" /usr/lib/firmware/qca/msbtfw11.mbn /usr/lib/firmware/qca/msbtfw11.tlv "
install_optional_items+=" /usr/lib/firmware/qca/msnv11.bin /usr/lib/firmware/qca/msnv11.b "

# NSS files for group/user resolution in initramfs
install_items+=" /etc/passwd /etc/group /etc/shadow /etc/nsswitch.conf "
install_items+=" /usr/lib64/libnss_files.so.2 /lib64/libnss_files.so.2 "
install_optional_items+=" /usr/lib64/libnss_compat.so.2 /lib64/libnss_compat.so.2 "

# Include modprobe configuration for initramfs
install_items+=" /usr/lib/modprobe.d/fairphone-fp5.conf "

# Early boot display and input drivers
add_drivers+=" goodix_berlin_core goodix_berlin_spi panel-raydium-rm692e5 spi-geni-qcom "
add_drivers+=" i2c-qcom-geni dispcc_sc7280 msm_dp "
add_drivers+=" qcom_q6v5_pas qcom_pil_info qcom_sysmon "
add_drivers+=" qcom_glink qcom_glink_rpm qcom_smd "

# Bluetooth drivers for early initialization
add_drivers+=" bluetooth btqca hci_uart bnep "

# Filesystems and dracut modules
filesystems+=" ext4 f2fs btrfs xfs "
add_dracutmodules+=" systemd systemd-initrd base rootfs-block dm "

compress="zstd"
dracut_rescue_image="no"
hostonly="no"
hostonly_cmdline="no"
