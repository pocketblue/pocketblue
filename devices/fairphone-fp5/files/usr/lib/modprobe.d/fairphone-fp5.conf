# Fairphone 5 (QCM6490) module configuration

# ALSA: snd-seq not available, prevent boot error
install snd-pcm /sbin/modprobe --ignore-install snd-pcm

# Bluetooth (WCN6750/QCA)
# The WCN6750 BT is integrated with WiFi and requires WPSS firmware to be loaded first
# hci_uart_qca depends on btqca, which handles QCA chip initialization
# ath11k handles WiFi and loads WPSS firmware
softdep btqca pre: ath11k
softdep hci_uart pre: btqca ath11k
softdep bluetooth pre: btqca

# USB-C Alt Mode - Type-C mux drivers load before pmic-glink
softdep qcom_pmic_glink pre: fsa4480 ptn36502 phy-qcom-qmp-combo typec_mux_fsa4480 typec_mux_ptn36502

# LPASS audio dependencies
softdep lpass_audio_cc_sc7280 pre: qcom_q6v5_pas qcom_common clk_qcom gcc_sc7280
softdep snd_soc_qcom_common pre: qcom_glink_smem qcom_q6v5_pas
softdep q6apm pre: qcom_q6v5_pas qcom_apr

# DisplayPort, FastRPC, USB dependencies
softdep msm_dp pre: dispcc_sc7280 phy-qcom-qmp-combo
softdep qcom_fastrpc pre: qcom_q6v5_pas
softdep dwc3_qcom pre: phy-qcom-qmp-combo phy-qcom-snps-femto-v2

# Camera - CAMSS and sensor drivers
# Load I2C and CCI drivers before CAMSS
softdep qcom-camss pre: i2c-qcom-cci
# Camera sensor modules (if available as modules)
# Samsung S5KJN1 (50MP main) and S5K4H7 (ultrawide/front)
# Note: These drivers may not be in mainline kernel yet
softdep s5kjn1 pre: qcom-camss i2c-qcom-cci
softdep s5k4h7 pre: qcom-camss i2c-qcom-cci
